"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[209],{8209:(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var i=n(2791),r=n(4834),s=n(4554),o=n(3767),a=n(890),c=n(3400),l=n(6151),d=n(4721),x=n(9134),h=n(703),p=n(6991),u=n(6934),g=n(2065),j=n(3967),m=n(9434),Z=n(6026),b=n(184);const f=e=>{let{id:t,name:n,img:i,msg:r,time:c,unread:l,online:d}=e;const x=(0,j.Z)(),h=(0,m.I0)();return(0,b.jsx)(s.Z,{onClick:()=>{h((0,Z.ND)({room_id:t}))},sx:{width:"100%",borderRadius:1,backgroundColor:"light"===x.palette.mode?"#fff":x.palette.background.paper},p:2,children:(0,b.jsx)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,b.jsx)(o.Z,{direction:"row",spacing:2,children:(0,b.jsx)(o.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:n})})})})})};var v=n(5931),w=n(5289),C=n(5228),k=n(3896),y=n(9157),I=n(4697),_=n(3044),S=n(2818),R=n(1683),F=n(7952),E=n(3687),T=n(8250);const A=localStorage.getItem("user_id"),W=(0,u.ZP)(s.Z)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),P=(0,u.ZP)(I.Z)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),N=e=>{let{img:t,firstName:n,lastName:r,online:s,_id:l}=e;const d=(0,j.Z)(),x="".concat(n," ").concat(r),[h,p]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=localStorage.getItem("iconClicked_".concat(l));e&&p(JSON.parse(e))}),[l]);return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:d.palette.background.paper},p:2,children:(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[s?(0,b.jsx)(P,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(_.Z,{alt:x,src:t})}):(0,b.jsx)(_.Z,{alt:x,src:t}),(0,b.jsx)(o.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:x})})]}),(0,b.jsx)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:(0,b.jsx)(c.Z,{onClick:()=>{T.W?(T.W.emit("friend_request",{to:l,from:A}),p(!0),localStorage.setItem("iconClicked_".concat(l),JSON.stringify(!0))):console.error("Socket is not initialized")},children:h?(0,b.jsx)(S.Z,{}):(0,b.jsx)(R.Z,{})})})]})})},z=e=>{let{img:t,firstName:n,lastName:i,online:r,id:s}=e;const l=(0,j.Z)(),d="".concat(n," ").concat(i);return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:l.palette.background.paper},p:2,children:(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[r?(0,b.jsx)(P,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(_.Z,{alt:d,src:t})}):(0,b.jsx)(_.Z,{alt:d,src:t}),(0,b.jsx)(o.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:d})})]}),(0,b.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,b.jsx)(c.Z,{onClick:()=>{T.W.emit("accept_request",{request_id:s})},children:(0,b.jsx)(R.Z,{})}),(0,b.jsx)(c.Z,{onClick:()=>{T.W.emit("refuse_request",{request_id:s})},children:(0,b.jsx)(F.Z,{})})]})]})})},O=e=>{let{img:t,firstName:n,lastName:i,online:r,_id:s}=e;const l=(0,j.Z)(),d="".concat(n," ").concat(i);return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:l.palette.background.paper},p:2,children:(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",r?(0,b.jsx)(P,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(_.Z,{alt:d,src:t})}):(0,b.jsx)(_.Z,{alt:d,src:t}),(0,b.jsx)(o.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:d})})]}),(0,b.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,b.jsx)(c.Z,{onClick:()=>{T.W.emit("start_conversation",{to:s,from:A})},children:(0,b.jsx)(E.Z,{})}),(0,b.jsxs)(c.Z,{onClick:()=>{T.W.emit("delete_friend",{sender_id:A,receiver_id:s})},children:[" ",(0,b.jsx)(F.Z,{})]})]})]})})},q=i.forwardRef((function(e,t){return(0,b.jsx)(v.Z,{direction:"up",ref:t,...e})})),M=()=>{const e=(0,m.I0)(),{users:t}=(0,m.v9)((e=>e.app));return(0,i.useEffect)((()=>{e((0,Z.j4)())}),[e]),(0,b.jsx)(b.Fragment,{children:t.map(((e,t)=>(0,b.jsx)(N,{...e},t)))})},D=()=>{const e=(0,m.I0)(),{friends:t}=(0,m.v9)((e=>e.app));return(0,i.useEffect)((()=>{e((0,Z.f6)())}),[e]),(0,b.jsx)(b.Fragment,{children:0===t.length?(0,b.jsx)(a.Z,{variant:"subtitle1",children:"No friends found"}):t.map(((e,t)=>(0,b.jsx)(O,{...e},t)))})},H=()=>{const e=(0,m.I0)(),{friendRequests:t}=(0,m.v9)((e=>e.app));return(0,i.useEffect)((()=>{e((0,Z.HG)())}),[e]),(0,b.jsx)(b.Fragment,{children:t.map(((e,t)=>(0,b.jsx)(z,{...e.sender,id:e._id},t))).filter((e=>!e.friendRequests))})},G=e=>{let{open:t,handleClose:n}=e;const[r,s]=i.useState(0);return(0,b.jsxs)(w.Z,{fullWidth:!0,maxWidth:"xs",open:t,TransitionComponent:q,keepMounted:!0,onClose:n,"aria-describedby":"alert-dialog-slide-description",sx:{p:4},children:[(0,b.jsx)(o.Z,{p:2,sx:{width:"100%"},children:(0,b.jsxs)(C.Z,{value:r,onChange:(e,t)=>{s(t)},centered:!0,children:[(0,b.jsx)(k.Z,{label:"Explore"}),(0,b.jsx)(k.Z,{label:"Friends"}),(0,b.jsx)(k.Z,{label:"Requests"})]})}),(0,b.jsx)(y.Z,{children:(0,b.jsx)(o.Z,{sx:{height:"100%"},children:(0,b.jsx)(o.Z,{spacing:2.4,children:(()=>{switch(r){case 0:return(0,b.jsx)(M,{});case 1:return(0,b.jsx)(D,{});case 2:return(0,b.jsx)(H,{})}})()})})})]})};var B=n(4984),L=n(9998),J=n(1036);const V=window.localStorage.getItem("user_id"),$=(0,u.ZP)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:20,backgroundColor:(0,g.Fq)(t.palette.background.paper,1),marginRight:t.spacing(2),marginLeft:0,width:"100%"}})),U=(0,u.ZP)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Y=(0,u.ZP)(r.ZP)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),width:"100%"}}})),K=()=>{const e=(0,L.Z)("up","md"),[t,n]=(0,i.useState)(!1),r=(0,j.Z)(),u=(0,m.I0)(),{conversations:g}=(0,m.v9)((e=>e.conversation.direct_chat));(0,i.useEffect)((()=>{T.W.emit("get_direct_conversations",{user_id:V},(e=>{u((0,B.Jj)({conversations:e}))}))}),[u]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.Z,{sx:{position:"relative",width:e?320:"100vw",backgroundColor:"light"===r.palette.mode?"#f8faff":r.palette.background.default,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:[!e&&(0,b.jsx)(J.Z,{}),(0,b.jsxs)(o.Z,{p:3,spacing:2,sx:{height:"100vh"},children:[(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsx)(a.Z,{variant:"h5",children:"Chats"}),(0,b.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,b.jsx)(c.Z,{onClick:()=>{n(!0)},children:(0,b.jsx)(x.Z,{})})})]}),(0,b.jsx)(o.Z,{sx:{width:"100%"},children:(0,b.jsxs)($,{children:[(0,b.jsx)(U,{children:(0,b.jsx)(h.Z,{color:"#709ce6"})}),(0,b.jsx)(Y,{placeholder:"Search..."})]})}),(0,b.jsxs)(o.Z,{spacing:1,children:[(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,b.jsx)(p.Z,{size:24}),(0,b.jsx)(l.Z,{children:"Archive"})]}),(0,b.jsx)(d.Z,{})]}),(0,b.jsx)(o.Z,{direction:"column",sx:{flexGrow:1,overflowY:"scroll",height:"100%"},children:(0,b.jsxs)(o.Z,{spacing:2.5,children:[(0,b.jsx)(a.Z,{variant:"subtitle2",sx:{color:"#676667"},children:"All Chats"}),g.filter((e=>!e.pinned)).map(((e,t)=>(0,b.jsx)(f,{...e},e.id)))]})})]})]}),t&&(0,b.jsx)(G,{open:t,handleClose:()=>{n(!1)}})]})};var Q=n(533),X=n(9165),ee=n(4059),te=n(9865),ne=n(5670);const ie=e=>{let{toggleContact:t,toggleRoomId:n}=e;const i=(0,j.Z)(),{current_conversation:r}=(0,m.v9)((e=>e.conversation.direct_chat));return(0,b.jsx)(s.Z,{p:2,sx:{height:100,width:"100%",backgroundColor:"light"===i.palette.mode?"#f8faff":i.palette.background.default,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,b.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{width:"100%",height:"100%"},children:[(0,b.jsxs)(o.Z,{direction:"row",spacing:2,children:[(0,b.jsx)(s.Z,{onClick:t,children:(0,b.jsx)(ne.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(_.Z,{alt:null===r||void 0===r?void 0:r.name})})}),(0,b.jsxs)(o.Z,{spacing:.2,children:[(0,b.jsx)(a.Z,{variant:"subtitle2",children:null===r||void 0===r?void 0:r.name}),(0,b.jsx)(a.Z,{variant:"caption",children:"Online"})]})]}),(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,b.jsx)(c.Z,{children:(0,b.jsx)(X.Z,{})}),(0,b.jsx)(c.Z,{children:(0,b.jsx)(ee.Z,{})}),(0,b.jsx)(c.Z,{children:(0,b.jsx)(h.Z,{})}),(0,b.jsx)(d.Z,{orientation:"vertical",flexItem:!0}),(0,b.jsx)(c.Z,{children:(0,b.jsx)(te.Z,{onClick:()=>n(!0)})})]})]})})};var re=n(7391),se=n(6520),oe=n(9877),ae=n(3466),ce=n(6526),le=n(6206),de=n(2413),xe=n(6880),he=n(5355),pe=n(9585),ue=n(4306),ge=n(6638),je=n(4122);const me=(0,u.ZP)(re.Z)((e=>{let{theme:t}=e;return{"& .MuiInputBase-input":{paddingBottom:"12px",paddingTop:"12px"}}})),Ze=[{color:"#4da5fe",icon:(0,b.jsx)(ce.Z,{size:24}),y:102,title:"Photo/Video"},{color:"#1b8cfe",icon:(0,b.jsx)(le.Z,{size:24}),y:172,title:"Stickers"},{color:"#0172e4",icon:(0,b.jsx)(de.Z,{size:24}),y:242,title:"Image"},{color:"#0159b2",icon:(0,b.jsx)(xe.Z,{size:24}),y:312,title:"Document"},{color:"#013f7f",icon:(0,b.jsx)(x.Z,{size:24}),y:382,title:"Contact"}],be=e=>{let{openPicker:t,setOpenPicker:n,setValue:r,value:s,inputRef:a}=e;const[l,d]=i.useState(!1);return(0,b.jsx)(me,{inputRef:a,value:s,onChange:e=>{r(e.target.value)},fullWidth:!0,placeholder:"Write a message...",variant:"filled",InputProps:{disableUnderline:!0,startAdornment:(0,b.jsxs)(o.Z,{sx:{width:"max-content"},children:[(0,b.jsx)(o.Z,{sx:{position:"relative",display:l?"inline-block":"none"},children:Ze.map(((e,t)=>(0,b.jsx)(se.Z,{placement:"right",title:e.title,children:(0,b.jsx)(oe.Z,{onClick:()=>{d(!l)},sx:{position:"absolute",top:-e.y,backgroundColor:e.color},"aria-label":"add",children:e.icon})},t)))}),(0,b.jsx)(ae.Z,{position:"end",children:(0,b.jsx)(c.Z,{onClick:()=>{d((e=>!e))},children:(0,b.jsx)(he.Z,{})})})]}),endAdornment:(0,b.jsx)(ae.Z,{position:"end",children:(0,b.jsx)(c.Z,{onClick:()=>{n((e=>!e))},children:(0,b.jsx)(pe.Z,{})})})}})};const fe=()=>{const e=(0,m.I0)(),t=(0,j.Z)(),[n,r]=i.useState(!1),a=window.localStorage.getItem("user_id"),{current_conversation:l}=(0,m.v9)((e=>e.conversation.direct_chat)),[d,x]=(0,i.useState)(""),h=(0,i.useRef)(null),{room_id:p}=(0,m.v9)((e=>e.app));const[u,g]=(0,i.useState)(!1),{conversations:Z}=(0,m.v9)((e=>e.conversation.direct_chat));return(0,i.useEffect)((()=>{const t=Z.find((e=>(null===e||void 0===e?void 0:e.id)===p));T.W.emit("get_messages",{conversation_id:null===t||void 0===t?void 0:t.id},(n=>{e((0,B.R$)({messages:n})),e((0,B.Aq)(t))}))}),[u,Z,e,p]),(0,b.jsx)(s.Z,{p:2,sx:{width:"100%",backgroundColor:"light"===t.palette.mode?"#f8faff":t.palette.background.default,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,b.jsxs)(o.Z,{sx:{width:"100%"},children:[(0,b.jsx)(s.Z,{sx:{display:n?"inline":"none",zIndex:10,position:"fixed",bottom:81,right:100},children:(0,b.jsx)(je.Z,{theme:t.palette.mode,data:ge,onEmojiSelect:e=>{!function(e){const t=h.current;if(t){const n=t.selectionStart,i=t.selectionEnd;x(d.substring(0,n)+e+d.substring(i)),t.selectionStart=t.selectionEnd=n+1}}(e.native)}})}),(0,b.jsx)(be,{inputRef:h,value:d,setValue:x,openPicker:n,setOpenPicker:r})]}),(0,b.jsx)(s.Z,{sx:{height:48,width:48,backgroundColor:t.palette.primary.main,borderRadius:1.5},children:(0,b.jsx)(o.Z,{sx:{height:"100%",width:"100%"},alignItems:"center",justifyContent:"center",children:(0,b.jsx)(c.Z,{onClick:()=>{var e;T.W.emit("text_message",{message:d,conversation_id:p,from:a,to:l.user_id,type:(e=d,/(https?:\/\/[^\s]+)/g.test(e)?"Link":"Text")},(e=>g(!u)))},children:(0,b.jsx)(ue.Z,{color:"white"})})})})]})})};var ve=n(5422),we=n(4387),Ce=n(7501),ke=n(7863),ye=n(7078);const Ie=e=>{let{el:t,menu:n}=e;const i=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(s.Z,{p:1.5,sx:{backgroundColor:t.incoming?i.palette.background.default:i.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)(o.Z,{spacing:2,children:[(0,b.jsxs)(o.Z,{p:2,direction:"row",spacing:3,alignItems:"center",sx:{backgroundColor:i.palette.background.paper,borderRadius:1},children:[(0,b.jsx)(ce.Z,{size:48}),(0,b.jsx)(a.Z,{variant:"caption",children:"Abstract.png"}),(0,b.jsx)(c.Z,{children:(0,b.jsx)(Ce.Z,{})})]}),(0,b.jsx)(a.Z,{variant:"body2",color:t.incoming?i.palette.text:"#fff",children:t.message})]})}),n&&(0,b.jsx)(Te,{})]})},_e=e=>{let{el:t,menu:n}=e;const i=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(s.Z,{p:1.5,sx:{backgroundColor:t.incoming?i.palette.background.default:i.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(o.Z,{spacing:2,children:(0,b.jsxs)(o.Z,{p:2,spacing:3,direction:"column",sx:{backgroundColor:i.palette.background.paper,borderRadius:1},children:[(0,b.jsx)("img",{src:t.preview,alt:t.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,b.jsxs)(o.Z,{spacing:2,children:[(0,b.jsx)(a.Z,{variant:"subtitle2",color:t.incoming?i.palette.text:"white",children:"Creating chat app"}),(0,b.jsx)(a.Z,{variant:"subtitle2",color:i.palette.primary.main,component:Q.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,b.jsx)(a.Z,{variant:"body2",color:t.incoming?i.palette.text:"white",children:t.message})]})})}),n&&(0,b.jsx)(Te,{})]})},Se=e=>{let{el:t,menu:n}=e;const i=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(s.Z,{p:1.5,sx:{backgroundColor:t.incoming?i.palette.background.default:i.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)(o.Z,{spacing:2,children:[(0,b.jsx)(o.Z,{p:2,direction:"column",spacing:3,alignItems:3,sx:{backgroundColor:i.palette.background.paper,borderRadius:1},children:(0,b.jsx)(a.Z,{variant:"body2",color:i.palette.text,children:t.message})}),(0,b.jsx)(a.Z,{variant:"caption",color:t.incoming?i.palette.text:"white",children:t.reply})]})}),n&&(0,b.jsx)(Te,{})]})},Re=e=>{let{el:t,menu:n}=e;const i=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(s.Z,{p:1.5,sx:{backgroundColor:t.incoming?i.palette.background.default:i.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)(o.Z,{spacing:1,children:[(0,b.jsx)("img",{src:t.img,alt:t.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,b.jsx)(a.Z,{variant:"body2",color:t.incoming?i.palette.text:"white",children:t.message})]})}),n&&(0,b.jsx)(Te,{})]})},Fe=e=>{let{id:t,el:n,menu:i}=e;const r=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",justifyContent:n.incoming?"start":"end",children:[(0,b.jsx)(s.Z,{p:1.5,sx:{backgroundColor:n.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(a.Z,{variant:"body2",color:n.incoming?r.palette.text:"white",children:n.message})}),i&&(0,b.jsx)(Te,{messageId:n.id})]})},Ee=e=>{let{el:t}=e;const n=(0,j.Z)();return(0,b.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsx)(d.Z,{width:"46%"}),(0,b.jsx)(a.Z,{variant:"caption",sx:{color:n.palette.text},children:t.text}),(0,b.jsx)(d.Z,{width:"46%"})]})},Te=e=>{let{messageId:t}=e;const n=(0,m.I0)(),[r,s]=(0,i.useState)(null),[c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),{conversations:x}=(0,m.v9)((e=>e.conversation.direct_chat)),{room_id:h}=(0,m.v9)((e=>e.app)),p=Boolean(r),u=()=>{s(null)};(0,i.useEffect)((()=>{const e=x.find((e=>(null===e||void 0===e?void 0:e.id)===h));T.W.emit("get_messages",{conversation_id:null===e||void 0===e?void 0:e.id},(t=>{n((0,B.R$)({messages:t})),n((0,B.Aq)(e))}))}),[l,x,n,h]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ke.Z,{size:20,id:"basic-button","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:e=>{s(e.currentTarget)}}),(0,b.jsx)(ve.Z,{id:"basic-menu",anchorEl:r,open:p,onClose:u,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,b.jsx)(o.Z,{spacing:1,px:1,children:ye.GF.map(((e,n)=>(0,b.jsx)(we.Z,{onClick:u,children:"Delete Message"===e.title?(0,b.jsx)(a.Z,{sx:{cursor:"pointer",color:"#ff0000"},onClick:e=>{e.stopPropagation(),T.W.emit("delete_message",t,(e=>{e&&e.success?(console.log("Message with ID ".concat(t," has been deleted")),c(!0)):console.error("Error deleting message with ID ".concat(t,":"),e&&e.error)})),u(),d(!l)},children:e.title}):(0,b.jsx)(a.Z,{sx:{cursor:"pointer",color:"#fff"},children:e.title})},n)))})})]})},Ae=e=>{const t=(0,m.I0)(),{conversations:n,current_messages:r}=(0,m.v9)((e=>e.conversation.direct_chat)),{room_id:a}=(0,m.v9)((e=>e.app));return(0,i.useEffect)((()=>{const e=n.find((e=>(null===e||void 0===e?void 0:e.id)===a));T.W.emit("get_messages",{conversation_id:null===e||void 0===e?void 0:e.id},(e=>{t((0,B.R$)({messages:e}))})),t((0,B.Aq)(e))}),[n,t,a]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(s.Z,{p:3,children:(0,b.jsx)(o.Z,{spacing:3,children:r.map(((t,n)=>{switch(t.type){case"divider":return(0,b.jsx)(Ee,{el:t},n);case"msg":switch(t.subtype){case"img":return(0,b.jsx)(Re,{el:t,menu:e},n);case"doc":return(0,b.jsx)(Ie,{el:t,menu:e},n);case"link":return(0,b.jsx)(_e,{el:t,menu:e},n);case"reply":return(0,b.jsx)(Se,{el:t,menu:e},n);default:return(0,b.jsx)(Fe,{el:t,menu:e},n)}default:return(0,b.jsx)(b.Fragment,{})}}))})})})},We=e=>{let{toggleContact:t,toggleRoomId:n}=e;const r=(0,j.Z)(),{current_messages:a}=(0,m.v9)((e=>e.conversation.direct_chat)),c=(0,i.useRef)(null);return(0,i.useEffect)((()=>{c.current.scrollTop=c.current.scrollHeight}),[a]),(0,b.jsxs)(o.Z,{height:"100%",maxHeight:"100vh",width:"auto",children:[(0,b.jsx)(ie,{toggleContact:t,toggleRoomId:n}),(0,b.jsx)(s.Z,{ref:c,width:"100%",sx:{flexGrow:1,height:"100%",overflow:"scroll",backgroundColor:"light"===r.palette.mode?"#F0F4FA":r.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,b.jsx)(Ae,{menu:!0})}),(0,b.jsx)(fe,{})]})};var Pe=n(3201),Ne=n(1889),ze=n(4559),Oe=n(155);const qe=e=>{let{updateSidebarType:t}=e;const n=(0,j.Z)(),[r,l]=i.useState(0);return(0,b.jsx)(s.Z,{sx:{width:320,maxHeight:"100vh"},children:(0,b.jsxs)(o.Z,{sx:{height:"100%"},children:[(0,b.jsx)(s.Z,{sx:{boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)",width:"100%",backgroundColor:"light"===n.palette.mode?"#F8FAFF":n.palette.background},children:(0,b.jsxs)(o.Z,{sx:{height:"100%",p:2},direction:"row",alignItems:"center",spacing:3,children:[(0,b.jsx)(c.Z,{onClick:()=>t("CONTACT"),children:(0,b.jsx)(ze.Z,{})}),(0,b.jsx)(a.Z,{variant:"subtitle2",children:"Shared Messages"})]})}),(0,b.jsxs)(C.Z,{sx:{px:2,pt:2},value:r,onChange:(e,t)=>{l(t)},centered:!0,children:[(0,b.jsx)(k.Z,{label:"Media"}),(0,b.jsx)(k.Z,{label:"Links"}),(0,b.jsx)(k.Z,{label:"Docs"})]}),(0,b.jsx)(o.Z,{sx:{height:"100%",position:"relative",flexGrow:1,overflow:"scroll"},spacing:1===r?1:3,p:3,children:(()=>{switch(r){case 0:return(0,b.jsx)(Ne.ZP,{container:!0,spacing:2,children:[0,1,2,3,4,5,6].map((e=>(0,b.jsx)(Ne.ZP,{item:!0,xs:4,children:(0,b.jsx)("img",{src:Oe.We.image.food(),alt:Oe.We.internet.userName()})})))});case 1:return ye.Gp.map((e=>(0,b.jsx)(_e,{el:e})));case 2:return ye.Ef.map((e=>(0,b.jsx)(Ie,{el:e})))}})()})]})})},Me=e=>{let{updateSidebarType:t}=e;const n=(0,j.Z)();return(0,b.jsx)(s.Z,{sx:{width:320,maxHeight:"100vh"},children:(0,b.jsxs)(o.Z,{sx:{height:"100%"},children:[(0,b.jsx)(s.Z,{sx:{boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)",width:"100%",backgroundColor:"light"===n.palette.mode?"#F8FAFF":n.palette.background},children:(0,b.jsxs)(o.Z,{sx:{height:"100%",p:2},direction:"row",alignItems:"center",spacing:3,children:[(0,b.jsx)(c.Z,{onClick:()=>t("CONTACT"),children:(0,b.jsx)(ze.Z,{})}),(0,b.jsx)(a.Z,{variant:"subtitle2",children:"Starred Messages"})]})}),(0,b.jsx)(o.Z,{sx:{height:"100%",position:"relative",flexGrow:1,overflow:"scroll"},spacing:3,p:3,children:(0,b.jsx)(Ae,{})})]})})};var De=n(8462);const He=()=>{const e=(0,m.I0)(),t=(0,j.Z)(),{room_id:n,chat_type:r}=(0,m.v9)((e=>e.app)),[c,l]=(0,i.useState)(!1),[d,x]=(0,i.useState)("CONTACT"),h=()=>{l(!c)},p=e=>{x(e)};return(0,b.jsxs)(o.Z,{direction:"row",sx:{width:"100%"},children:[(0,b.jsx)(K,{}),(0,b.jsx)(s.Z,{sx:{height:"100%",width:c?"calc(100vw - 740px)":"calc(100vw - 420px)",backgroundColor:"light"===t.palette.mode?"#f0f4fa":t.palette.background.paper},children:"individual"===r&&null!==n?(0,b.jsx)(We,{toggleContact:h,toggleRoomId:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&e((0,Z.AS)({room_id:null}))}}):(0,b.jsxs)(o.Z,{spacing:2,sx:{height:"100%",width:"100%"},alignItems:"center",justifyContent:"center",children:[(0,b.jsx)(De.Z,{}),(0,b.jsxs)(a.Z,{variant:"subtitle2",children:["Select a conversation or start a"," ",(0,b.jsx)(Q.Z,{style:{color:t.palette.primary.main,textDecoration:"none"},to:"/",children:"new one"})]})]})}),c&&(()=>{switch(d){case"CONTACT":return(0,b.jsx)(Pe.Z,{toggleContact:h,updateSidebarType:p});case"STARRED":return(0,b.jsx)(Me,{updateSidebarType:p});case"SHARED":return(0,b.jsx)(qe,{updateSidebarType:p})}})()]})}}}]);
//# sourceMappingURL=209.8ad24174.chunk.js.map